#############################################
#############################################
# ğŸ“¦ Package: Piscina - Clorador Sal (LLM Vision)
# ğŸ¯ Objetivo: Detetar LED "sal baixo" do clorador CTX via anÃ¡lise de imagem
# ğŸ“‚ LocalizaÃ§Ã£o: /config/packages/piscina_clorador_sal.yaml
# ğŸ”— DependÃªncias: (Package)
# - Amostragem mÃºltipla (atÃ© 3 capturas, 1.2s)
# - Debounce para desligar sÃ³ apÃ³s N 'off' seguidos
#############################################

# âš ï¸ NOTA: As automaÃ§Ãµes deste package foram movidas para automations.yaml
#    para permitir ediÃ§Ã£o via GUI. Este ficheiro contÃ©m apenas:
#    - input_boolean, input_number, template sensors, etc.
#    Ver: automations.yaml (procurar por '# Package: piscina_clorador_sal.yaml')
#
input_boolean:
  piscina_sal_baixo_raw:
    name: Piscina â€” Sal baixo (RAW via LLM Vision)
    icon: mdi:water-alert
  piscina_sal_baixo:
    name: Piscina â€” Sal baixo (debounced)
    icon: mdi:water-alert-outline
input_number:
  piscina_sal_baixo_off_streak:
    name: Piscina â€” Sal baixo OFF streak
    min: 0
    max: 100
    step: 1
    mode: box
  piscina_sal_baixo_off_debounce:
    name: Piscina â€” Debounce OFF (leituras consecutivas)
    min: 1
    max: 20
    step: 1
    mode: slider
    initial: 3
template:
- binary_sensor:
  - name: Piscina â€” Sal baixo (via LLM Vision)
    unique_id: piscina_sal_baixo_llmvision
    state: '{{ is_state(''input_boolean.piscina_sal_baixo'', ''on'') }}'
    device_class: problem
    attributes:
      description: Indicador final (com debounce) para SAL BAIXO no clorador CTX,
        obtido por anÃ¡lise de imagem (LLM Vision) do painel. 'on' quando o LED de
        sal baixo Ã© detetado aceso/intermitente; 'off' caso contrÃ¡rio.
