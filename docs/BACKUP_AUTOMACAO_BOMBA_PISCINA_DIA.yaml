# ============================================================================
# BACKUP DA AUTOMAÃ‡ÃƒO: bomba_piscina_dia
# ============================================================================
# 
# ğŸ“… Recuperado de: Commit f0cd1c2 (Fase 2: CategorizaÃ§Ã£o automÃ¡tica)
# ğŸ“… Data Original: ~Janeiro 2026
# ğŸ” Status: REMOVIDA do sistema atual
# âš ï¸  Problema: Referenciada mas nÃ£o existe mais
#
# Esta automaÃ§Ã£o usava o BLUEPRINT PVExcessControl para controlar a bomba
# da piscina baseando-se no excedente de energia solar.
#
# ğŸ“Š SENSORES UTILIZADOS:
#   - sensor.emoncms_solar           â†’ ProduÃ§Ã£o solar
#   - sensor.emoncms_export_power_positive â†’ ExportaÃ§Ã£o para rede
#   - sensor.emoncms_use             â†’ Consumo total
#   - sensor.bomba_piscina_switch_0_power â†’ PotÃªncia da bomba
#
# ğŸ”Œ SWITCH CONTROLADO:
#   - switch.bomba_piscina_switch_0
#
# âš™ï¸  CONFIGURAÃ‡ÃƒO:
#   - TensÃ£o da rede: 230V
#   - Margem de toggle: 10W
#   - Limite inversor: 0
#
# ============================================================================

- id: bomba_piscina_dia
  alias: ğŸŠğŸ»Bomba Piscina Dia
  description: AutomaÃ§Ã£o do Home Assistant.
  use_blueprint:
    path: PVExcessControl/pv_excess_control.yaml
    input:
      automation_id: automation.bomba_piscina_dia  # â† Corrigido (era new_automation_3)
      grid_voltage: 230
      pv_power: sensor.emoncms_solar
      export_power: sensor.emoncms_export_power_positive
      load_power: sensor.emoncms_use
      actual_power: sensor.bomba_piscina_switch_0_power
      power_toggle_margin: 10
      appliance_switch: switch.bomba_piscina_switch_0
      inverter_limit: 0
  mode: single
  max_exceeded: warning

# ============================================================================
# NOTA IMPORTANTE SOBRE O BLUEPRINT PVExcessControl
# ============================================================================
#
# O blueprint PVExcessControl (github.com/panhans/HomeAssistant) Ã© um sistema
# avanÃ§ado de controlo de aparelhos baseado em excedente fotovoltaico.
#
# ğŸ¯ FUNCIONALIDADES:
#   âœ… Liga aparelho quando hÃ¡ excedente solar suficiente
#   âœ… Desliga quando importa energia da rede
#   âœ… Considera potÃªncia do aparelho para evitar oscilaÃ§Ãµes
#   âœ… Margem de toggle para estabilidade
#   âœ… Suporte para mÃºltiplos inversores
#   âœ… HistÃ³rico e estatÃ­sticas
#
# ğŸ“‹ ALTERNATIVAS ATUAIS NO SISTEMA:
#   1. automation.automacao_bomba_piscina (ID: automacao_bomba_piscina)
#      - Sistema manual baseado em thresholds fixos
#      - Trigger: < -750W (ON) e > +750W (OFF)
#
#   2. automation.piscina_arranque_com_excedente_fv
#      - Usa binary_sensor.piscina_excedente_fv_bomba
#      - Delay de 2 minutos
#
#   3. automation.piscina_watchdog_arranque_fv_2min_v2
#      - Watchdog que verifica a cada 2 minutos
#      - Backup do sistema de arranque FV
#
# ============================================================================
# RECOMENDAÃ‡Ã•ES DE RESTAURAÃ‡ÃƒO
# ============================================================================
#
# â“ DEVE RESTAURAR?
#
# ğŸŸ¢ SIM, se:
#   - Deseja controlo mais sofisticado via blueprint
#   - Quer funcionalidades avanÃ§adas (estatÃ­sticas, fine-tuning)
#   - Pretende consolidar as 3 automaÃ§Ãµes alternativas numa sÃ³
#
# ğŸ”´ NÃƒO, se:
#   - Sistema atual funciona bem
#   - Prefere cÃ³digo simples e direto
#   - NÃ£o quer depender de blueprint externo
#
# ============================================================================
# COMO RESTAURAR
# ============================================================================
#
# 1ï¸âƒ£ VERIFICAR BLUEPRINT:
#    - Confirmar se PVExcessControl estÃ¡ instalado
#    - Path: /config/blueprints/automation/PVExcessControl/pv_excess_control.yaml
#    - Se nÃ£o: instalar de github.com/panhans/HomeAssistant
#
# 2ï¸âƒ£ VERIFICAR SENSORES:
#    - Todos os sensores emoncms_* devem estar ativos
#    - sensor.bomba_piscina_switch_0_power deve reportar potÃªncia
#
# 3ï¸âƒ£ ADICIONAR AO automations.yaml:
#    - Copiar automaÃ§Ã£o acima
#    - Recarregar automaÃ§Ãµes (Developer Tools > YAML)
#
# 4ï¸âƒ£ DESATIVAR AUTOMAÃ‡Ã•ES REDUNDANTES:
#    - Desativar automation.automacao_bomba_piscina
#    - Manter watchdog como backup (opcional)
#
# 5ï¸âƒ£ ATUALIZAR REFERÃŠNCIAS:
#    Em automation.ligardesligar_automacao_piscina:
#      - Trocar automation.bomba_piscina_dia
#      - Por ID correto apÃ³s criaÃ§Ã£o
#
#    Em automation.hidrojet:
#      - Trocar automation.bomba_piscina_dia
#      - Por ID correto apÃ³s criaÃ§Ã£o
#
# ============================================================================
# VANTAGENS vs DESVANTAGENS
# ============================================================================
#
# BLUEPRINT (bomba_piscina_dia):
#   âœ… Controlo mais inteligente e adaptativo
#   âœ… EstatÃ­sticas e histÃ³rico integrados
#   âœ… Fine-tuning de parÃ¢metros
#   âœ… ManutenÃ§Ã£o via blueprint (updates automÃ¡ticos)
#   âŒ DependÃªncia externa
#   âŒ Debugging mais complexo
#   âŒ Requer sensores emoncms_*
#
# MANUAL (automacao_bomba_piscina):
#   âœ… Simples e direto
#   âœ… FÃ¡cil de debugar
#   âœ… Sem dependÃªncias externas
#   âœ… CÃ³digo visÃ­vel e editÃ¡vel
#   âŒ Menos funcionalidades
#   âŒ Thresholds fixos
#   âŒ Sem estatÃ­sticas
#
# ============================================================================
